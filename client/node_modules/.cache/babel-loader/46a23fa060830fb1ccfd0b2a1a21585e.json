{"ast":null,"code":"var _jsxFileName = \"/Users/andreascorcia/Downloads/CODING/quiz-machine/client/src/components/sections/private/quizForm/QuizCreationOrEditForm.tsx\";\nimport React, { useReducer, useState, useContext } from \"react\";\nimport { QuizCreationReducer, QuizCreationStartingValues } from \"../../../../reducers/QuizCreation\";\nimport { Input, StyledLabel, Container as InputContainer } from \"../../../UI/Input\";\nimport { FormContainer, FormTitle, SubmitButton } from \"../../../UI/Form\";\nimport { QuestionSubForm } from \"../QuestionSubForm\";\nimport { createQuiz, editQuiz } from \"../../../../utils/dbFunctions\";\nimport { AuthContext } from \"../../../../contexts/auth/Auth\";\nimport { SavedQuestionCard } from \"../SavedQuestionCard\";\nimport { Icon } from \"../../../UI/Icon\";\nimport { capitaliseInput, getPropertyName } from \"../../../../utils/functions\";\nimport { AddQuestionButton, RadioButtonsContainer, RadioContainer, ToggleQuestionVisibilityButton } from \"./QuizFormStyledComponents\";\nexport const QuizCreationOrEditForm = ({\n  usage,\n  currentQuiz\n}) => {\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [isAddingQuestions, setIsAddingQuestions] = useState(false);\n  const [inputValues, dispatch] = useReducer(QuizCreationReducer, usage === \"creation\" ? QuizCreationStartingValues : currentQuiz);\n  const [uploadMessage, setUploadMessage] = useState(\"\");\n  const [showUploadedQuestions, setShowUploadedQuestions] = useState(false);\n  console.log(\"title\", inputValues.title);\n\n  const handleChange = (input, inputName) => {\n    dispatch({\n      type: inputName,\n      payload: input\n    });\n  };\n\n  const handleSubmit = async () => {\n    const quizGenerated = { ...inputValues\n    };\n    quizGenerated.title = capitaliseInput(quizGenerated.title);\n    console.log(\"QUIZ generated\", quizGenerated);\n\n    if (usage === \"editing\") {\n      editQuiz(currentQuiz._id, quizGenerated);\n      return;\n    }\n\n    const response = await createQuiz(quizGenerated, currentUser._id);\n    setUploadMessage(response.message);\n  };\n\n  const handleRadioButtonChange = choice => {\n    const actionToDispatch = {\n      type: \"isPrivate\",\n      payload: false\n    };\n\n    if (choice === \"yes\") {\n      actionToDispatch.payload = true;\n    }\n\n    dispatch(actionToDispatch);\n  };\n\n  const saveQuestionInState = question => dispatch({\n    type: \"questions\",\n    payload: question\n  });\n\n  const closeQuestionForm = () => setIsAddingQuestions(false);\n\n  return /*#__PURE__*/React.createElement(FormContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, isAddingQuestions && /*#__PURE__*/React.createElement(QuestionSubForm, {\n    saveQuestionInState: saveQuestionInState,\n    closeItself: closeQuestionForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), uploadMessage ? /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, uploadMessage) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, usage === \"creation\" ? \"Create\" : \"Edit\", \" your quiz\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault();\n      handleSubmit();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    inputName: \"title\",\n    onChangeFunction: handleChange,\n    value: getPropertyName(inputValues, \"title\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    inputName: \"backgroundImageUrl\",\n    onChangeFunction: handleChange,\n    value: getPropertyName(inputValues, \"backgroundImageUrl\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(InputContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StyledLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, \"What do you want to do with this quiz?\".toUpperCase()), /*#__PURE__*/React.createElement(RadioButtonsContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(RadioContainer, {\n    isSelected: inputValues.isPrivate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    id: \"yes\",\n    name: \"isPrivate\",\n    value: \"yes\",\n    onChange: e => handleRadioButtonChange(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"yes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, \"Keep private\")), /*#__PURE__*/React.createElement(RadioContainer, {\n    isSelected: !inputValues.isPrivate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    id: \"no\",\n    name: \"isPrivate\",\n    value: \"no\",\n    onChange: e => handleRadioButtonChange(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"no\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  }, \"Make public\")))), /*#__PURE__*/React.createElement(AddQuestionButton, {\n    onClick: () => setIsAddingQuestions(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: \"plus-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }), \"Add a question\"), inputValues.questions.length > 0 && /*#__PURE__*/React.createElement(ToggleQuestionVisibilityButton, {\n    onClick: () => setShowUploadedQuestions(prev => !prev),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, showUploadedQuestions ? \"Hide\" : \"Show\", \" uploaded questions\"), showUploadedQuestions && inputValues.questions.map((question, index) => /*#__PURE__*/React.createElement(SavedQuestionCard, {\n    key: index,\n    question: question,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(SubmitButton, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, \"SUBMIT\"))));\n}; // import React, { useReducer, useState, useContext } from \"react\";\n// import styled from \"styled-components\";\n// import {\n//   QuizCreationReducer,\n//   QuizCreationStartingValues,\n//   QuizCreationAction,\n//   InputName\n// } from \"../../../reducers/QuizCreation\";\n// import {\n//   Input,\n//   StyledLabel,\n//   Container as InputContainer\n// } from \"../../UI/Input\";\n// import { FormContainer, FormTitle, SubmitButton } from \"../../UI/Form\";\n// import { Colors } from \"../../../constants/colors\";\n// import {\n//   PrivateQuizQuestion,\n//   PrivacyChoice\n// } from \"../../../models/PrivateQuiz\";\n// import { QuestionSubForm } from \"./QuestionSubForm\";\n// import { createQuiz } from \"../../../utils/dbFunctions\";\n// import { AuthContext } from \"../../../contexts/auth/Auth\";\n// import { ApiResponse } from \"../../../models/ApiResponse\";\n// import { SavedQuestionCard } from \"./SavedQuestionCard\";\n// import { Icon } from \"../../UI/Icon\";\n// import { capitaliseInput } from \"../../../utils/functions\";\n// const RadioButtonsContainer = styled.div`\n//   display: flex;\n//   margin: 0.5rem 0 1rem 0;\n// `;\n// const RadioContainer = styled.div`\n//   display: flex;\n//   margin: 0 1rem;\n//   background-color: ${(props: { isSelected: boolean }) =>\n//     props.isSelected ? Colors.ORANGE : Colors.LIGHTEST_GREY};\n//   color: ${(props: { isSelected: boolean }) =>\n//     props.isSelected ? \"white\" : \"grey\"};\n//   padding: 0.4rem 0.9rem 0.4rem 0.6rem;\n//   align-items: center;\n//   border-radius: 40px;\n//   cursor: pointer;\n//   label {\n//     padding-left: 6px;\n//     font-size: 0.8rem;\n//     cursor: pointer;\n//   }\n//   input {\n//     margin: 0;\n//     display: none;\n//   }\n// `;\n// const AddQuestionButton = styled.h4`\n//   color: ${Colors.STEEL_PINK_2};\n//   background-color: white;\n//   padding: 0.5rem;\n//   border-radius: 40px;\n//   margin: 2.5rem;\n//   cursor: pointer;\n//   font-size: 1rem;\n//   :hover {\n//     color: white;\n//     background-color: ${Colors.STEEL_PINK_2};\n//   }\n// `;\n// export const QuizCreationForm: React.FC = () => {\n//   const { currentUser } = useContext(AuthContext);\n//   const [isAddingQuestions, setIsAddingQuestions] = useState(false);\n//   const [inputValues, dispatch] = useReducer(\n//     QuizCreationReducer,\n//     QuizCreationStartingValues\n//   );\n//   const [uploadMessage, setUploadMessage] = useState(\"\");\n//   console.log(inputValues);\n//   const handleChange = (input: string, inputName: InputName) => {\n//     dispatch({ type: inputName, payload: input });\n//   };\n//   const handleSubmit = async () => {\n//     const quizCreated = { ...inputValues };\n//     quizCreated.title = capitaliseInput(quizCreated.title);\n//     console.log(\"QUIZ CREATED\", quizCreated);\n//     const response = await createQuiz(quizCreated, currentUser!._id);\n//     setUploadMessage((response as ApiResponse).message as string);\n//   };\n//   const handleRadioButtonChange = (choice: PrivacyChoice) => {\n//     const actionToDispatch: QuizCreationAction = {\n//       type: \"isPrivate\",\n//       payload: false\n//     };\n//     if (choice === \"yes\") {\n//       actionToDispatch.payload = true;\n//     }\n//     dispatch(actionToDispatch);\n//   };\n//   const saveQuestionInState = (question: PrivateQuizQuestion) =>\n//     dispatch({ type: \"questions\", payload: question });\n//   const closeQuestionForm = () => setIsAddingQuestions(false);\n//   return (\n//     <FormContainer>\n//       {isAddingQuestions && (\n//         <QuestionSubForm\n//           saveQuestionInState={saveQuestionInState}\n//           closeItself={closeQuestionForm}\n//         />\n//       )}\n//       {uploadMessage ? (\n//         <h2>{uploadMessage}</h2>\n//       ) : (\n//         <>\n//           <FormTitle>Create your quiz</FormTitle>\n//           <form\n//             onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n//               e.preventDefault();\n//               handleSubmit();\n//             }}\n//           >\n//             <Input inputName=\"title\" onChangeFunction={handleChange} />\n//             <Input\n//               inputName=\"backgroundImageUrl\"\n//               onChangeFunction={handleChange}\n//             />\n//             <InputContainer>\n//               <StyledLabel>\n//                 {\"What do you want to do with this quiz?\".toUpperCase()}\n//               </StyledLabel>\n//               <RadioButtonsContainer>\n//                 <RadioContainer isSelected={inputValues.isPrivate}>\n//                   <input\n//                     type=\"radio\"\n//                     id=\"yes\"\n//                     name=\"isPrivate\"\n//                     value=\"yes\"\n//                     onChange={e =>\n//                       handleRadioButtonChange(e.target.value as PrivacyChoice)\n//                     }\n//                   />\n//                   <label htmlFor=\"yes\">Keep private</label>\n//                 </RadioContainer>\n//                 <RadioContainer isSelected={!inputValues.isPrivate}>\n//                   <input\n//                     type=\"radio\"\n//                     id=\"no\"\n//                     name=\"isPrivate\"\n//                     value=\"no\"\n//                     onChange={e =>\n//                       handleRadioButtonChange(e.target.value as PrivacyChoice)\n//                     }\n//                   />\n//                   <label htmlFor=\"no\">Make public</label>\n//                 </RadioContainer>\n//               </RadioButtonsContainer>\n//             </InputContainer>\n//             <AddQuestionButton onClick={() => setIsAddingQuestions(true)}>\n//               <Icon icon={\"plus-circle\"} />\n//               Add a question\n//             </AddQuestionButton>\n//             {inputValues.questions.length > 0 &&\n//               inputValues.questions.map((question, index) => (\n//                 <SavedQuestionCard key={index} question={question} />\n//               ))}\n//             <SubmitButton type=\"submit\">SUBMIT</SubmitButton>\n//           </form>\n//         </>\n//       )}\n//     </FormContainer>\n//   );\n// };","map":{"version":3,"sources":["/Users/andreascorcia/Downloads/CODING/quiz-machine/client/src/components/sections/private/quizForm/QuizCreationOrEditForm.tsx"],"names":["React","useReducer","useState","useContext","QuizCreationReducer","QuizCreationStartingValues","Input","StyledLabel","Container","InputContainer","FormContainer","FormTitle","SubmitButton","QuestionSubForm","createQuiz","editQuiz","AuthContext","SavedQuestionCard","Icon","capitaliseInput","getPropertyName","AddQuestionButton","RadioButtonsContainer","RadioContainer","ToggleQuestionVisibilityButton","QuizCreationOrEditForm","usage","currentQuiz","currentUser","isAddingQuestions","setIsAddingQuestions","inputValues","dispatch","uploadMessage","setUploadMessage","showUploadedQuestions","setShowUploadedQuestions","console","log","title","handleChange","input","inputName","type","payload","handleSubmit","quizGenerated","_id","response","message","handleRadioButtonChange","choice","actionToDispatch","saveQuestionInState","question","closeQuestionForm","e","preventDefault","toUpperCase","isPrivate","target","value","questions","length","prev","map","index"],"mappings":"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","sourcesContent":["import React, { useReducer, useState, useContext } from \"react\";\nimport {\n  QuizCreationReducer,\n  QuizCreationStartingValues,\n  QuizCreationAction,\n  InputName\n} from \"../../../../reducers/QuizCreation\";\nimport {\n  Input,\n  StyledLabel,\n  Container as InputContainer\n} from \"../../../UI/Input\";\nimport { FormContainer, FormTitle, SubmitButton } from \"../../../UI/Form\";\nimport {\n  PrivateQuizQuestion,\n  PrivacyChoice,\n  PrivateQuiz\n} from \"../../../../models/PrivateQuiz\";\nimport { QuestionSubForm } from \"../QuestionSubForm\";\nimport { createQuiz, editQuiz } from \"../../../../utils/dbFunctions\";\nimport { AuthContext } from \"../../../../contexts/auth/Auth\";\nimport { ApiResponse } from \"../../../../models/ApiResponse\";\nimport { SavedQuestionCard } from \"../SavedQuestionCard\";\nimport { Icon } from \"../../../UI/Icon\";\nimport { capitaliseInput, getPropertyName } from \"../../../../utils/functions\";\nimport {\n  AddQuestionButton,\n  RadioButtonsContainer,\n  RadioContainer,\n  ToggleQuestionVisibilityButton\n} from \"./QuizFormStyledComponents\";\n\nexport type PossibleUsage = \"creation\" | \"editing\";\n\ninterface Props {\n  usage: PossibleUsage;\n  currentQuiz?: PrivateQuiz;\n}\n\nexport const QuizCreationOrEditForm: React.FC<Props> = ({\n  usage,\n  currentQuiz\n}) => {\n  const { currentUser } = useContext(AuthContext);\n  const [isAddingQuestions, setIsAddingQuestions] = useState(false);\n  const [inputValues, dispatch] = useReducer(\n    QuizCreationReducer,\n    usage === \"creation\"\n      ? QuizCreationStartingValues\n      : (currentQuiz as PrivateQuiz)\n  );\n  const [uploadMessage, setUploadMessage] = useState(\"\");\n  const [showUploadedQuestions, setShowUploadedQuestions] = useState(false);\n\n  console.log(\"title\", inputValues.title);\n\n  const handleChange = (input: string, inputName: InputName) => {\n    dispatch({ type: inputName, payload: input });\n  };\n\n  const handleSubmit = async () => {\n    const quizGenerated = { ...inputValues };\n    quizGenerated.title = capitaliseInput(quizGenerated.title);\n    console.log(\"QUIZ generated\", quizGenerated);\n\n    if (usage === \"editing\") {\n      editQuiz(currentQuiz!._id as string, quizGenerated);\n      return;\n    }\n\n    const response = await createQuiz(quizGenerated, currentUser!._id);\n    setUploadMessage((response as ApiResponse).message as string);\n  };\n\n  const handleRadioButtonChange = (choice: PrivacyChoice) => {\n    const actionToDispatch: QuizCreationAction = {\n      type: \"isPrivate\",\n      payload: false\n    };\n    if (choice === \"yes\") {\n      actionToDispatch.payload = true;\n    }\n    dispatch(actionToDispatch);\n  };\n\n  const saveQuestionInState = (question: PrivateQuizQuestion) =>\n    dispatch({ type: \"questions\", payload: question });\n\n  const closeQuestionForm = () => setIsAddingQuestions(false);\n\n  return (\n    <FormContainer>\n      {isAddingQuestions && (\n        <QuestionSubForm\n          saveQuestionInState={saveQuestionInState}\n          closeItself={closeQuestionForm}\n        />\n      )}\n\n      {uploadMessage ? (\n        <h2>{uploadMessage}</h2>\n      ) : (\n        <>\n          <FormTitle>\n            {usage === \"creation\" ? \"Create\" : \"Edit\"} your quiz\n          </FormTitle>\n          <form\n            onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n              e.preventDefault();\n              handleSubmit();\n            }}\n          >\n            <Input\n              inputName=\"title\"\n              onChangeFunction={handleChange}\n              value={getPropertyName(inputValues, \"title\")}\n            />\n            <Input\n              inputName=\"backgroundImageUrl\"\n              onChangeFunction={handleChange}\n              value={getPropertyName(inputValues, \"backgroundImageUrl\" as any)}\n            />\n\n            <InputContainer>\n              <StyledLabel>\n                {\"What do you want to do with this quiz?\".toUpperCase()}\n              </StyledLabel>\n              <RadioButtonsContainer>\n                <RadioContainer isSelected={inputValues.isPrivate}>\n                  <input\n                    type=\"radio\"\n                    id=\"yes\"\n                    name=\"isPrivate\"\n                    value=\"yes\"\n                    onChange={e =>\n                      handleRadioButtonChange(e.target.value as PrivacyChoice)\n                    }\n                  />\n                  <label htmlFor=\"yes\">Keep private</label>\n                </RadioContainer>\n                <RadioContainer isSelected={!inputValues.isPrivate}>\n                  <input\n                    type=\"radio\"\n                    id=\"no\"\n                    name=\"isPrivate\"\n                    value=\"no\"\n                    onChange={e =>\n                      handleRadioButtonChange(e.target.value as PrivacyChoice)\n                    }\n                  />\n                  <label htmlFor=\"no\">Make public</label>\n                </RadioContainer>\n              </RadioButtonsContainer>\n            </InputContainer>\n            <AddQuestionButton onClick={() => setIsAddingQuestions(true)}>\n              <Icon icon={\"plus-circle\"} />\n              Add a question\n            </AddQuestionButton>\n\n            {inputValues.questions.length > 0 && (\n              <ToggleQuestionVisibilityButton\n                onClick={() => setShowUploadedQuestions(prev => !prev)}\n              >\n                {showUploadedQuestions ? \"Hide\" : \"Show\"} uploaded questions\n              </ToggleQuestionVisibilityButton>\n            )}\n            {showUploadedQuestions &&\n              inputValues.questions.map((question, index) => (\n                <SavedQuestionCard key={index} question={question} />\n              ))}\n\n            <SubmitButton type=\"submit\">SUBMIT</SubmitButton>\n          </form>\n        </>\n      )}\n    </FormContainer>\n  );\n};\n\n// import React, { useReducer, useState, useContext } from \"react\";\n// import styled from \"styled-components\";\n// import {\n//   QuizCreationReducer,\n//   QuizCreationStartingValues,\n//   QuizCreationAction,\n//   InputName\n// } from \"../../../reducers/QuizCreation\";\n// import {\n//   Input,\n//   StyledLabel,\n//   Container as InputContainer\n// } from \"../../UI/Input\";\n// import { FormContainer, FormTitle, SubmitButton } from \"../../UI/Form\";\n// import { Colors } from \"../../../constants/colors\";\n// import {\n//   PrivateQuizQuestion,\n//   PrivacyChoice\n// } from \"../../../models/PrivateQuiz\";\n// import { QuestionSubForm } from \"./QuestionSubForm\";\n// import { createQuiz } from \"../../../utils/dbFunctions\";\n// import { AuthContext } from \"../../../contexts/auth/Auth\";\n// import { ApiResponse } from \"../../../models/ApiResponse\";\n// import { SavedQuestionCard } from \"./SavedQuestionCard\";\n// import { Icon } from \"../../UI/Icon\";\n// import { capitaliseInput } from \"../../../utils/functions\";\n\n// const RadioButtonsContainer = styled.div`\n//   display: flex;\n//   margin: 0.5rem 0 1rem 0;\n// `;\n\n// const RadioContainer = styled.div`\n//   display: flex;\n//   margin: 0 1rem;\n//   background-color: ${(props: { isSelected: boolean }) =>\n//     props.isSelected ? Colors.ORANGE : Colors.LIGHTEST_GREY};\n//   color: ${(props: { isSelected: boolean }) =>\n//     props.isSelected ? \"white\" : \"grey\"};\n//   padding: 0.4rem 0.9rem 0.4rem 0.6rem;\n//   align-items: center;\n//   border-radius: 40px;\n//   cursor: pointer;\n\n//   label {\n//     padding-left: 6px;\n//     font-size: 0.8rem;\n//     cursor: pointer;\n//   }\n\n//   input {\n//     margin: 0;\n//     display: none;\n//   }\n// `;\n\n// const AddQuestionButton = styled.h4`\n//   color: ${Colors.STEEL_PINK_2};\n//   background-color: white;\n//   padding: 0.5rem;\n//   border-radius: 40px;\n//   margin: 2.5rem;\n//   cursor: pointer;\n//   font-size: 1rem;\n\n//   :hover {\n//     color: white;\n//     background-color: ${Colors.STEEL_PINK_2};\n//   }\n// `;\n\n// export const QuizCreationForm: React.FC = () => {\n//   const { currentUser } = useContext(AuthContext);\n//   const [isAddingQuestions, setIsAddingQuestions] = useState(false);\n//   const [inputValues, dispatch] = useReducer(\n//     QuizCreationReducer,\n//     QuizCreationStartingValues\n//   );\n//   const [uploadMessage, setUploadMessage] = useState(\"\");\n\n//   console.log(inputValues);\n\n//   const handleChange = (input: string, inputName: InputName) => {\n//     dispatch({ type: inputName, payload: input });\n//   };\n\n//   const handleSubmit = async () => {\n//     const quizCreated = { ...inputValues };\n//     quizCreated.title = capitaliseInput(quizCreated.title);\n//     console.log(\"QUIZ CREATED\", quizCreated);\n//     const response = await createQuiz(quizCreated, currentUser!._id);\n//     setUploadMessage((response as ApiResponse).message as string);\n//   };\n\n//   const handleRadioButtonChange = (choice: PrivacyChoice) => {\n//     const actionToDispatch: QuizCreationAction = {\n//       type: \"isPrivate\",\n//       payload: false\n//     };\n//     if (choice === \"yes\") {\n//       actionToDispatch.payload = true;\n//     }\n//     dispatch(actionToDispatch);\n//   };\n\n//   const saveQuestionInState = (question: PrivateQuizQuestion) =>\n//     dispatch({ type: \"questions\", payload: question });\n\n//   const closeQuestionForm = () => setIsAddingQuestions(false);\n\n//   return (\n//     <FormContainer>\n//       {isAddingQuestions && (\n//         <QuestionSubForm\n//           saveQuestionInState={saveQuestionInState}\n//           closeItself={closeQuestionForm}\n//         />\n//       )}\n\n//       {uploadMessage ? (\n//         <h2>{uploadMessage}</h2>\n//       ) : (\n//         <>\n//           <FormTitle>Create your quiz</FormTitle>\n//           <form\n//             onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n//               e.preventDefault();\n//               handleSubmit();\n//             }}\n//           >\n//             <Input inputName=\"title\" onChangeFunction={handleChange} />\n//             <Input\n//               inputName=\"backgroundImageUrl\"\n//               onChangeFunction={handleChange}\n//             />\n\n//             <InputContainer>\n//               <StyledLabel>\n//                 {\"What do you want to do with this quiz?\".toUpperCase()}\n//               </StyledLabel>\n//               <RadioButtonsContainer>\n//                 <RadioContainer isSelected={inputValues.isPrivate}>\n//                   <input\n//                     type=\"radio\"\n//                     id=\"yes\"\n//                     name=\"isPrivate\"\n//                     value=\"yes\"\n//                     onChange={e =>\n//                       handleRadioButtonChange(e.target.value as PrivacyChoice)\n//                     }\n//                   />\n//                   <label htmlFor=\"yes\">Keep private</label>\n//                 </RadioContainer>\n//                 <RadioContainer isSelected={!inputValues.isPrivate}>\n//                   <input\n//                     type=\"radio\"\n//                     id=\"no\"\n//                     name=\"isPrivate\"\n//                     value=\"no\"\n//                     onChange={e =>\n//                       handleRadioButtonChange(e.target.value as PrivacyChoice)\n//                     }\n//                   />\n//                   <label htmlFor=\"no\">Make public</label>\n//                 </RadioContainer>\n//               </RadioButtonsContainer>\n//             </InputContainer>\n//             <AddQuestionButton onClick={() => setIsAddingQuestions(true)}>\n//               <Icon icon={\"plus-circle\"} />\n//               Add a question\n//             </AddQuestionButton>\n\n//             {inputValues.questions.length > 0 &&\n//               inputValues.questions.map((question, index) => (\n//                 <SavedQuestionCard key={index} question={question} />\n//               ))}\n\n//             <SubmitButton type=\"submit\">SUBMIT</SubmitButton>\n//           </form>\n//         </>\n//       )}\n//     </FormContainer>\n//   );\n// };\n"]},"metadata":{},"sourceType":"module"}